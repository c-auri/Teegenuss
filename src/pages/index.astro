---
import Pack from '../layouts/Pack.astro'
import { CollectionEntry, getCollection, getEntry } from 'astro:content'
import { modulo } from '../scripts/modulo'

const entry = await getEntry('packs', "23-1-Chinas-Schaetze")
const packs = await getCollection('packs')

const packIndex = packs.findIndex(pack => pack.id === entry.id)
const prevPack = packs[modulo(packIndex - 1, packs.length)]!
const nextPack = packs[modulo(packIndex + 1, packs.length)]!

const navigation = {
    root: "pakete",
    segments: [{
        collection: packs.sort((a: CollectionEntry<'packs'>, b: CollectionEntry<'packs'>) => a.id <= b.id ? +1 : -1), 
        entry: entry
    }],
    relative: {
        prevHref: `/pakete/${prevPack.data.route}`,
        nextHref: `/pakete/${nextPack.data.route}`,
    }
}
---
<Pack pack={entry} navigation={navigation} />